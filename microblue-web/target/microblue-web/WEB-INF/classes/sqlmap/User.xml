<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE sqlMap PUBLIC "-//iBATIS.com//DTD SQL Map 2.0//EN" "http://www.ibatis.com/dtd/sql-map-2.dtd">
<sqlMap namespace="userNameSpace">
    <typeAlias alias="user" type="com.lj.dal.po.User"/>

    <resultMap id="userResult" class="user">

        <result property="userId" column="USER_ID"></result>
        <result property="roles" column="ROLES"></result>
        <result property="password" column="PASSWORD"></result>
      <!--   <result property="account.email" column="EMAIL"></result>
        <result property="account.firstName" column="FIRST_NAME"></result>
        <result property="account.lastName" column="LAST_NAME"></result>
        <result property="account.status" column="STATUS"></result>
        <result property="account.address1" column="ADDRESS_1"></result>
        <result property="account.address2" column="ADDRESS_2"></result>
        <result property="account.city" column="CITY"></result>
        <result property="account.state" column="STATE"></result>
        <result property="account.zip" column="ZIP"></result>
        <result property="account.country" column="COUNTRY"></result>
        <result property="account.phone" column="PHONE"></result>
        <result property="account.creditCardNumber" column="CREDIT_CARD_NUMBER"></result>
        <result property="account.creditCardType" column="CREDIT_CARD_TYPE"></result>
        <result property="account.creditCardExpiry" column="CREDIT_CARD_EXPIRY"></result>
        <result property="account.languagePreference" column="LANGUAGE_PREFERENCE"></result>
        <result property="profile.favoriteCategoryId" column="FAVORITE_CATEGORY_ID"></result>
        <result property="profile.listOption" column="LIST_OPTION"></result> -->

    </resultMap>



    <select id="getUserById" resultMap="userResult" parameterClass="string"><!--<![CDATA[-->
              select
                        User.*,
                        ACCOUNT.*,
                        PROFILE.*
              from
                        USER
        <dynamic prepend="WHERE">
        <isNotEmpty prepend="AND" property="name">
                        (USER.USER_ID = #userId#)
        </isNotEmpty>
        </dynamic>



    <!--]]>--></select>
    
    <select id="getAllUsers" resultMap="userResult" >
    <![CDATA[
              select* from USER
    ]]></select>
</sqlMap>